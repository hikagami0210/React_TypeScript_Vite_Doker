version: "3.7"

services:
  react-node:
    build:
      args:
        - NODE_VER=current-slim
      context: .
      dockerfile: Dockerfile
    tty: true
    command: sh -c 'yarn && yarn dev --host && tcm -p src/**/*.module.css -o dist -w'
    environment:
      - CHOKIDAR_USEPOLLING=true
    volumes:
      - ./:/home/node/app
      - /code/node_modules
    ports:
      - "5173:5173"
